---
import { getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import BlogPostCard from '../components/BlogPostCard.astro';
import Button from '../components/Button.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import Hero from '../components/Hero.astro';
import ProductCard from '../components/ProductCard.astro';
import Section from '../components/Section.astro';
import ServiceCard from '../components/ServiceCard.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body class="bg-white">
		<Header />

		<!-- Hero Section -->
		<Hero dark>
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
				<!-- Left: Text Content -->
				<div>
					<h1 class="text-5xl md:text-7xl font-bold mb-8 text-white tracking-tight leading-tight">
						EventStorming & Domain-Driven Design Consulting
					</h1>
					<p class="text-2xl md:text-3xl mb-12 text-white/90">
						Helping teams build better software through collaborative design and strategic domain modeling
					</p>
					<div class="flex flex-col sm:flex-row gap-4">
						<Button href="mailto:info@virtualgenius.com" variant="primary">
							Schedule a Workshop
						</Button>
						<Button href="/services" variant="outlined">
							Explore Services
						</Button>
					</div>
				</div>

				<!-- Right: Workshop Visual -->
				<div class="relative lg:block hidden">
					<div class="relative transform lg:rotate-2">
						<div class="w-full aspect-[4/3] bg-gradient-to-br from-vg-red/20 to-vg-burgundy/40 rounded-3xl shadow-2xl flex items-center justify-center overflow-hidden border border-white/10">
							<!-- Placeholder for workshop photo/video -->
							<span class="text-white/40 text-lg text-center px-8">EventStorming<br/>Workshop<br/>Photo</span>
						</div>
					</div>
				</div>
			</div>
		</Hero>

		<!-- Services Overview -->
		<Section>
			<h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-vg-burgundy">Services</h2>
			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				<ServiceCard
					title="EventStorming Workshops"
					description="2-day facilitated sessions for exploring complex business domains"
					href="/services/eventstorming"
					linkText="Learn More"
				/>
				<ServiceCard
					title="DDD Training"
					description="Essential and Strategic Domain-Driven Design courses"
					href="/services/training"
					linkText="View Courses"
				/>
				<ServiceCard
					title="Coaching & Consulting"
					description="Ongoing support for pilot projects and implementation"
					href="/services/coaching"
					linkText="Get Started"
				/>
			</div>
		</Section>

		<!-- About Paul / Why VG -->
		<Section background="white">
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
				<!-- Left: Text Content -->
				<div>
					<p class="text-sm uppercase tracking-wider mb-4 text-vg-red font-semibold">LEADING BY DESIGN</p>
					<h2 class="text-4xl md:text-5xl font-bold mb-8 text-vg-burgundy tracking-tight">
						About Paul Rayner
					</h2>
					<p class="text-xl mb-6 text-vg-gray-dark leading-relaxed">
						Paul Rayner is a seasoned software design consultant, trainer, and founder of Explore DDD. With over 20 years of experience helping organizations tackle complex software challenges, Paul brings deep expertise in EventStorming, Domain-Driven Design, and collaborative modeling.
					</p>
					<p class="text-xl mb-8 text-vg-gray-dark leading-relaxed">
						His approach combines technical excellence with facilitation skills to help teams discover better solutions together.
					</p>
					<Button href="/about" variant="secondary">
						Learn More About Paul
					</Button>
				</div>

				<!-- Right: Photo with Steamhaus-style treatment -->
				<div class="relative lg:sticky lg:top-32">
					<div class="relative transform lg:rotate-2">
						<div class="w-full aspect-[4/5] bg-gradient-to-br from-vg-gray-light to-vg-gray rounded-3xl shadow-2xl flex items-center justify-center overflow-hidden">
							<!-- Placeholder for photo -->
							<span class="text-vg-gray-dark text-lg text-center px-8">Paul Rayner<br/>Workshop Photo</span>
						</div>
					</div>
				</div>
			</div>
		</Section>

		<!-- Explore DDD Feature -->
		<Section background="burgundy-dark">
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
				<!-- Left: Text Content -->
				<div>
					<p class="text-sm uppercase tracking-wider mb-4 text-vg-amber font-semibold">COMMUNITY LEADERSHIP</p>
					<h2 class="text-4xl md:text-5xl font-bold mb-8 text-white tracking-tight leading-tight">
						Founder of Explore DDD
					</h2>
					<p class="text-xl mb-8 text-white/90 leading-relaxed">
						Explore DDD is the premier conference for Domain-Driven Design practitioners, bringing together the global DDD community to share knowledge, experiences, and insights.
					</p>
					<Button href="https://exploreddd.com" variant="outlined">
						Visit Explore DDD
					</Button>
				</div>

				<!-- Right: Conference Photo Placeholder -->
				<div class="relative">
					<div class="relative transform lg:-rotate-2">
						<div class="w-full aspect-video bg-gradient-to-br from-vg-gray-dark to-vg-burgundy rounded-3xl shadow-2xl flex items-center justify-center overflow-hidden">
							<!-- Placeholder for conference photo - replace with actual image -->
							<span class="text-white/60 text-lg text-center px-8">Explore DDD<br/>Conference Photo</span>
						</div>
					</div>
				</div>
			</div>
		</Section>

		<!-- Open Source Products -->
		<Section>
			<h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-vg-burgundy">Open Source Products</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
				<ProductCard
					title="ContextFlow"
					description="Visual DDD context mapper with Flow + Strategic views for analyzing bounded contexts, relationships, and code ownership"
					demoUrl="https://thepaulrayner.com/contextflow/"
					githubUrl="https://github.com/paulrayner/contextflow"
					detailsUrl="/products/contextflow"
				/>
				<ProductCard
					title="CodeCohesion"
					description="3D visualization for code cohesion and architecture evolution. Watch your codebase evolve commit-by-commit"
					demoUrl="https://thepaulrayner.com/codecohesion/"
					githubUrl="https://github.com/paulrayner/codecohesion"
					detailsUrl="/products/codecohesion"
				/>
			</div>
		</Section>

		<!-- Recent Writing -->
		{posts.length > 0 && (
			<Section background="gray">
				<h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-vg-burgundy">Recent Writing</h2>
				<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
					{posts.map((post) => (
						<BlogPostCard
							title={post.data.title}
							description={post.data.description}
							pubDate={post.data.pubDate}
							href={`/blog/${post.slug}/`}
						/>
					))}
				</div>
				<div class="text-center mt-8">
					<a href="/blog" class="text-vg-red hover:text-vg-red-light font-semibold text-lg">
						View All Posts â†’
					</a>
				</div>
			</Section>
		)}

		<!-- Contact CTA -->
		<Section>
			<div class="text-center max-w-3xl mx-auto">
				<h2 class="text-3xl md:text-4xl font-bold mb-6 text-vg-burgundy">
					Ready to transform your software design?
				</h2>
				<p class="text-xl mb-8 text-vg-gray-dark">
					Get in touch to discuss how EventStorming and Domain-Driven Design can help your team build better software.
				</p>
				<div class="mb-6">
					<a href="mailto:info@virtualgenius.com" class="text-2xl font-semibold text-vg-red hover:text-vg-red-light">
						info@virtualgenius.com
					</a>
				</div>
				<Button href="mailto:info@virtualgenius.com" variant="primary">
					Get in Touch
				</Button>
			</div>
		</Section>

		<Footer />
	</body>
</html>
