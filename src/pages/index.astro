---
import { getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import BlogPostCard from '../components/BlogPostCard.astro';
import Button from '../components/Button.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import Hero from '../components/Hero.astro';
import ProductCard from '../components/ProductCard.astro';
import Section from '../components/Section.astro';
import ServiceCard from '../components/ServiceCard.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body class="bg-white">
		<Header />

		<!-- Hero Section -->
		<Hero dark>
			<div class="text-center max-w-4xl mx-auto">
				<h1 class="text-5xl md:text-7xl font-bold mb-8 text-white tracking-tight leading-tight">
					EventStorming & Domain-Driven Design Consulting
				</h1>
				<p class="text-2xl md:text-3xl mb-12 text-white/90">
					Helping teams build better software through collaborative design and strategic domain modeling
				</p>
				<div class="flex flex-col sm:flex-row gap-4 justify-center">
					<Button href="mailto:info@virtualgenius.com" variant="primary">
						Schedule a Workshop
					</Button>
					<Button href="/services" variant="outlined">
						Explore Services
					</Button>
				</div>
			</div>
		</Hero>

		<!-- Services Overview -->
		<Section>
			<h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-vg-burgundy">Services</h2>
			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				<ServiceCard
					title="EventStorming Workshops"
					description="2-day facilitated sessions for exploring complex business domains"
					href="/services/eventstorming"
					linkText="Learn More"
				/>
				<ServiceCard
					title="DDD Training"
					description="Essential and Strategic Domain-Driven Design courses"
					href="/services/training"
					linkText="View Courses"
				/>
				<ServiceCard
					title="Coaching & Consulting"
					description="Ongoing support for pilot projects and implementation"
					href="/services/coaching"
					linkText="Get Started"
				/>
			</div>
		</Section>

		<!-- About Paul / Why VG -->
		<Section background="gray">
			<div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
				<div>
					<h2 class="text-3xl md:text-4xl font-bold mb-6 text-vg-burgundy">About Paul Rayner</h2>
					<p class="text-lg mb-4 text-vg-gray-dark">
						Paul Rayner is a seasoned software design consultant, trainer, and founder of Explore DDD. With over 20 years of experience helping organizations tackle complex software challenges, Paul brings deep expertise in EventStorming, Domain-Driven Design, and collaborative modeling.
					</p>
					<p class="text-lg mb-6 text-vg-gray-dark">
						His approach combines technical excellence with facilitation skills to help teams discover better solutions together.
					</p>
					<Button href="/about" variant="secondary">
						Learn More About Paul
					</Button>
				</div>
				<div class="flex justify-center">
					<div class="w-full max-w-md aspect-square bg-vg-gray-light rounded-lg flex items-center justify-center">
						<span class="text-vg-gray">[Professional Photo]</span>
					</div>
				</div>
			</div>
		</Section>

		<!-- Explore DDD Feature -->
		<Section background="burgundy">
			<div class="text-center max-w-3xl mx-auto">
				<h2 class="text-3xl md:text-4xl font-bold mb-6">Founder of Explore DDD</h2>
				<p class="text-xl mb-8 text-vg-gray-light">
					Explore DDD is the premier conference for Domain-Driven Design practitioners, bringing together the global DDD community to share knowledge, experiences, and insights.
				</p>
				<a
					href="https://exploreddd.com"
					target="_blank"
					rel="noopener noreferrer"
					class="inline-block px-8 py-4 bg-white text-vg-burgundy font-semibold rounded-lg hover:bg-vg-gray-light transition-colors duration-200"
				>
					Visit Explore DDD
				</a>
			</div>
		</Section>

		<!-- Open Source Products -->
		<Section>
			<h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-vg-burgundy">Open Source Products</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
				<ProductCard
					title="ContextFlow"
					description="Visual DDD context mapper with Flow + Strategic views for analyzing bounded contexts, relationships, and code ownership"
					demoUrl="https://thepaulrayner.com/contextflow/"
					githubUrl="https://github.com/paulrayner/contextflow"
					detailsUrl="/products/contextflow"
				/>
				<ProductCard
					title="CodeCohesion"
					description="3D visualization for code cohesion and architecture evolution. Watch your codebase evolve commit-by-commit"
					demoUrl="https://thepaulrayner.com/codecohesion/"
					githubUrl="https://github.com/paulrayner/codecohesion"
					detailsUrl="/products/codecohesion"
				/>
			</div>
		</Section>

		<!-- Recent Writing -->
		{posts.length > 0 && (
			<Section background="gray">
				<h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-vg-burgundy">Recent Writing</h2>
				<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
					{posts.map((post) => (
						<BlogPostCard
							title={post.data.title}
							description={post.data.description}
							pubDate={post.data.pubDate}
							href={`/blog/${post.slug}/`}
						/>
					))}
				</div>
				<div class="text-center mt-8">
					<a href="/blog" class="text-vg-red hover:text-vg-red-light font-semibold text-lg">
						View All Posts â†’
					</a>
				</div>
			</Section>
		)}

		<!-- Contact CTA -->
		<Section>
			<div class="text-center max-w-3xl mx-auto">
				<h2 class="text-3xl md:text-4xl font-bold mb-6 text-vg-burgundy">
					Ready to transform your software design?
				</h2>
				<p class="text-xl mb-8 text-vg-gray-dark">
					Get in touch to discuss how EventStorming and Domain-Driven Design can help your team build better software.
				</p>
				<div class="mb-6">
					<a href="mailto:info@virtualgenius.com" class="text-2xl font-semibold text-vg-red hover:text-vg-red-light">
						info@virtualgenius.com
					</a>
				</div>
				<Button href="mailto:info@virtualgenius.com" variant="primary">
					Get in Touch
				</Button>
			</div>
		</Section>

		<Footer />
	</body>
</html>
